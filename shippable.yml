language: node_js

node_js:
  - 7

branches:
  only:
    - master-ci-shippable

env:
  - secure: GxZ+7DI/C0MDMTrjFIN8/7oTrLdrsstVjWm1oq4ogWXKWtlMKiW/xbGTYh8IXrrzByUkSa1b5tnJ2c2TdkC2MhTKsVWQZpj8k9Dq/450Uws7nKGIVi4oodI9Y75dhXIXSGnWWj/mcKl3JVD9YM9Af9oN5aYacPKXc0ICrc4B+vWZoIihCesOk5wSHlhSWuOyIGcF0+7io8IcGSqqPlsI41UQd/3NhdgAB/aavmRiJ8Q/D56fVUk1EYEqcL53pZRi34PSML2uYGPz9z+zjqTmaJ/EvdXXgLx9/DrB/rwXFP7RHUib5wG8m3QnhN7/EMdz1qFouWT4mWPcpfWSK3xFTQ==
  
build:
  cache: true
  cache_dir_list:
    - $SHIPPABLE_BUILD_DIR/node_modules
  ci:
    - shippable_retry npm install
    - npm test
    - ./node_modules/.bin/istanbul cover ./node_modules/.bin/_mocha -- --ui=bdd --reporter=xunit-file
    - ./node_modules/.bin/istanbul report cobertura --dir shippable/codecoverage/